/* =========================================================
   Header (SASS) — responsivo + acessível
   Estrutura do HTML:
   <header class="demo-header">
     <div class="container hdr">
       <button class="icon-pill menu-btn">…</button>
       <a class="brand">…</a>
       <nav id="demoNav" class="nav" [class.is-open]="…">…</nav>
       <div class="actions">…</div>
     </div>
   </header>
   ========================================================= */

/* -------- A11Y utilidades -------- */
.sr-only
  position: absolute !important
  height: 1px
  width: 1px
  overflow: hidden
  clip: rect(1px, 1px, 1px, 1px)
  white-space: nowrap

.skip-link
  position: absolute
  left: -9999px
  top: auto
  width: 1px
  height: 1px
  overflow: hidden
  &:focus
    position: fixed
    left: 16px
    top: 16px
    width: auto
    height: auto
    background: #111827
    color: #fff
    padding: .5rem .75rem
    border-radius: .5rem
    z-index: 999

/* -------- Header “bar” -------- */
.demo-header
  position: sticky
  top: 0
  z-index: 50
  border-bottom: 1px solid var(--hdr-border)
  background: var(--hdr-bg)
  backdrop-filter: saturate(180%) blur(8px)
  /* preenche a largura útil em devices com notch */
  padding-left: env(safe-area-inset-left)
  padding-right: env(safe-area-inset-right)

/* -------- Pill buttons (ícones redondos) -------- */
.icon-pill
  appearance: none
  -webkit-appearance: none
  border: 1px solid var(--hdr-pill-border)
  background: var(--hdr-pill-bg)
  color: var(--hdr-pill-color)
  width: 36px
  height: 36px
  border-radius: 9999px
  display: inline-grid
  place-items: center
  cursor: pointer
  padding: 0
  line-height: 0
  transition: background .15s ease, border-color .15s ease
  &:hover
    background: var(--hdr-link-hover)
  &:focus-visible
    outline: 2px solid var(--hdr-pill-ring)
    outline-offset: 2px
  svg, img
    width: 18px
    height: 18px
    display: block

/* -------- Accent picker -------- */
.accent-picker
  display: inline-flex
  gap: 6px
  margin-left: 6px

.swatch
  width: 22px
  height: 22px
  border-radius: 9999px
  border: 2px solid var(--hdr-pill-border, #d1d5db)
  cursor: pointer
  padding: 0
  appearance: none
  background: transparent
  &.is-active
    outline: 2px solid var(--accent)
    outline-offset: 2px
.swatch--teal
  background: #058075
.swatch--orange
  background: #D17A30
.swatch--violet
  background: #6D5BD0
.swatch--blue
  background: #2563eb
.swatch--rose
  background: #e11d48

/* -------- Grid base (desktop) -------- */
.hdr
  display: grid
  align-items: center
  gap: 16px
  min-height: 56px
  padding: 8px 0
  grid-template-columns: auto 1fr auto
  grid-template-areas: 'brand nav actions'
  position: relative   /* base p/ nav absoluto no mobile */

.brand
  grid-area: brand
  font-weight: 800
  text-decoration: none
  color: var(--hdr-link)

.nav
  grid-area: nav
  display: flex
  gap: 12px
  flex-wrap: wrap
  justify-content: center
  min-width: 0
  a
    color: var(--hdr-link)
    text-decoration: none
    padding: 6px 8px
    border-radius: 8px
    &:hover
      background: var(--hdr-hover)

/* link ativo */
.nav a.is-active,
.nav a[aria-current="page"],
.nav a[aria-current="true"]
  color: var(--hdr-link-active)
.nav a.is-active::after,
.nav a[aria-current="page"]::after,
.nav a[aria-current="true"]::after
  content: ""
  display: block
  height: 2px
  margin-top: 2px
  border-radius: 1px
  background: var(--hdr-accent)

.actions
  grid-area: actions
  display: flex
  gap: 8px
  min-width: max-content
  justify-self: end
  white-space: nowrap

/* botão de menu só no mobile */
.menu-btn
  display: none

/* ================== MOBILE ≤ 840px ================== */
@media (max-width: 840px)
  /* grid do topo: menu | brand | actions */
  .hdr
    grid-template-columns: auto 1fr auto
    grid-template-areas: 'menu brand actions'
    row-gap: 8px

  .menu-btn
    display: inline-grid
    grid-area: menu

  .brand
    justify-self: start
    font-size: .95rem
    line-height: 1.1

  .actions
    justify-self: end
    gap: 6px

  .accent-picker
    gap: 4px
  .swatch
    width: 18px
    height: 18px

  /* Nav vira “drop-down” fora da .container (100vw) */
  .nav
    position: absolute
    left: 0
    right: 0
    top: 100%
    margin-top: 6px
    z-index: 60

    /* ocupa a tela toda horizontalmente */
    width: 100vw
    transform: translateX(calc(50% - 50vw))

    display: grid
    grid-auto-rows: min-content
    gap: 4px
    justify-items: start

    background: var(--hdr-pill-bg)
    border: 1px solid var(--hdr-pill-border)
    border-radius: .75rem
    /* respeita áreas seguras (notch) */
    padding-left: calc(.5rem + env(safe-area-inset-left))
    padding-right: calc(.5rem + env(safe-area-inset-right))
    padding-top: .35rem
    padding-bottom: .35rem

    /* colapsado por padrão */
    max-height: 0
    overflow: hidden
    opacity: 0
    pointer-events: none
    transition: max-height .24s ease, opacity .2s ease, transform .2s ease

    a
      display: block
      width: 100%
      padding: .5rem .6rem
      border-radius: .5rem
      &:hover
        background: var(--hdr-hover)

  .nav.is-open
    max-height: 60vh
    opacity: 1
    pointer-events: auto
    transform: translateX(calc(50% - 50vw)) /* mantém alinhado quando abre */
